- content_for :title, "Listings"
.container
  .col-md-12
    %h1 Browse Projects
  .col-md-12
    .card.card-x
      = form_tag(jobs_search_path, :method => "get") do
        .col-md-10.job-search-input
          = text_field_tag :query, @query, :placeholder => "Start typing what you want to search...", :class => "form-control"
        .col-md-2
          = submit_tag @query, :class => "btn btn-info pull-right", :value => "Search"
  - if false # this is broken..
    #tag_cloud
      = image_tag 'tag.gif'
      %b Top Tags:

      - tag_cloud Job.tag_counts, %w(tag_s tag_m tag_l tag_xl) do |tag, css_class|
        %span.tag= h link_to tag.name, jobs_path + '?tags=' + tag.name, :class => css_class
  .row
    #advanced_search.col-lg-4.col-sm-12
      .card.card-x
        = label_tag :department, "Department", class: "filter-dropdown-label"

        = select_tag :department, options_for_select([["All Departments",0]]) + |
          options_from_collection_for_select(Department.all, "id", "name",      |
          @department_id), { :class => 'medium data-dropdown content' }         |

        = label_tag :faculty, "Faculty", class: "filter-dropdown-label"

        = select_tag :faculty, options_for_select([["All Faculty",0]]) +          |
          options_from_collection_for_select(@faculty, "id", "name", @faculty_id) |

        = label_tag :compensation, "Compensation", class: "filter-dropdown-label"

        = select_tag :compensation,                   |
          options_for_select({                        |
           "Don't care" => Job::Compensation::None,   |
           "Pay"        => Job::Compensation::Pay,    |
           "Credit"     => Job::Compensation::Credit, |
           "Pay or credit" => Job::Compensation::Both |
          }, @compensation)                           |

        = label_tag :post_status, "Status", class: "filter-dropdown-label"

        = select_tag :post_status,           |
          options_for_select({               |
            "Open" => Job::Status::Open,     |
            "Closed" => Job::Status::Filled, |
            "All" => nil                     |
          }, @post_status)                   |

        = hidden_field_tag :as, params[:as]
        = label_tag :per_page, "Listings per page", class: "filter-dropdown-label"

        = select_tag :per_page, options_for_select([8,16,32,64,128], params[:per_page].to_i), :multiple=>false
    .col-lg-8.col-sm-12
      .card.card-x
        - if @jobs.empty?
          %h3 No matching listings were found! Try a different search.
        - else
          = render @jobs
  %center
    %p
      = will_paginate @jobs